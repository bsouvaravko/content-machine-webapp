<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRO –ú–æ–Ω—Ç–∞–∂ - –¢–µ—Å—Ç</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            padding: 10px;
            display: flex;
            gap: 10px;
            justify-content: center;
            z-index: 1000;
        }
        .test-btn {
            padding: 8px 16px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }
        .test-btn:active {
            background: #45a049;
        }
    </style>
</head>
<body>
    <!-- Mock Telegram WebApp -->
    <script>
        window.Telegram = {
            WebApp: {
                ready: function() { console.log('WebApp ready'); },
                expand: function() { console.log('WebApp expanded'); },
                close: function() { alert('WebApp closed'); },
                sendData: function(data) { 
                    console.log('Data sent to bot:', data);
                    alert('–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã:\n\n' + data);
                },
                showAlert: function(msg) { alert(msg); },
                BackButton: {
                    show: function() { console.log('Back button shown'); },
                    hide: function() { console.log('Back button hidden'); },
                    onClick: function(callback) { 
                        window.backButtonCallback = callback;
                    }
                },
                MainButton: {
                    setText: function(text) { 
                        document.getElementById('main-btn').textContent = text;
                    },
                    show: function() { 
                        document.getElementById('main-btn').style.display = 'block';
                    },
                    hide: function() { 
                        document.getElementById('main-btn').style.display = 'none';
                    },
                    onClick: function(callback) { 
                        window.mainButtonCallback = callback;
                    },
                    color: '',
                    textColor: ''
                },
                version: '6.0',
                colorScheme: 'dark',
                initDataUnsafe: {
                    user: {
                        id: 12345,
                        first_name: 'Test',
                        username: 'testuser'
                    }
                }
            }
        };
    </script>
    
    <div class="app-container" id="app">
        
        <!-- –≠–ö–†–ê–ù 1: –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –º–æ–Ω—Ç–∞–∂–∞ -->
        <div class="screen" id="screen-mode" data-screen="1">
            <h1 class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –º–æ–Ω—Ç–∞–∂–∞</h1>
            <div class="mode-buttons">
                <button class="mode-btn" data-mode="split_screen" onclick="selectMode('split_screen')">
                    <span class="mode-icon">üì±</span>
                    <span class="mode-label">–†–∞–∑–¥–µ—Ä–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞</span>
                </button>
                <button class="mode-btn" data-mode="corner" onclick="selectMode('corner')">
                    <span class="mode-icon">üìê</span>
                    <span class="mode-label">–í —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞</span>
                </button>
                <button class="mode-btn" data-mode="video_insert" onclick="selectMode('video_insert')">
                    <span class="mode-icon">üé¨</span>
                    <span class="mode-label">–í–∏–¥–µ–æ-–≤—Å—Ç–∞–≤–∫–∏</span>
                </button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 2: –í—ã–±–æ—Ä —Ç–∏–ø–∞ –≤–∏–¥–µ–æ -->
        <div class="screen hidden" id="screen-video" data-screen="2">
            <h1 class="screen-title">–†–µ–∂–∏–º: <span id="selected-mode-title"></span></h1>
            <div class="video-grid">
                <div class="video-card" onclick="selectVideoType('additional')">
                    <div class="video-placeholder">
                        <div class="placeholder-text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≤–∏–¥–µ–æ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ</div>
                    </div>
                    <div class="video-label">–î–æ–ø. –≤–∏–¥–µ–æ</div>
                </div>
                <div class="video-card active" onclick="selectVideoType('avatar')">
                    <div class="video-preview-box">
                        <div class="play-button">‚ñ∂</div>
                    </div>
                    <div class="video-label">–í–∏–¥–µ–æ —Å –∞–≤–∞—Ç–∞—Ä–æ–º</div>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω—Ç–∞–∂–∞ -->
        <div class="screen hidden" id="screen-settings" data-screen="3">
            
            <!-- –í–∏–¥–µ–æ –ø—Ä–µ–≤—å—é -->
            <div class="video-preview-top">
                <div class="preview-frame">
                    <div class="preview-placeholder">–í–∏–¥–µ–æ –ø—Ä–µ–≤—å—é</div>
                </div>
            </div>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div class="settings-panel">
                
                <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div class="setting-group">
                    <div class="setting-header" onclick="toggleGroup('main-settings')">
                        <span class="toggle-icon" id="toggle-main-settings">‚ñº</span>
                        <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                    </div>
                    <div class="setting-content" id="main-settings">
                        
                        <div class="setting-item">
                            <label class="setting-label">–ü–æ–∑–∏—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞:</label>
                            <select class="setting-select" id="avatar-position" onchange="updateState('avatarPosition', this.value)">
                                <option value="top">–°–≤–µ—Ä—Ö—É</option>
                                <option value="bottom">–°–Ω–∏–∑—É</option>
                                <option value="left">–°–ª–µ–≤–∞</option>
                                <option value="right">–°–ø—Ä–∞–≤–∞</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">
                                –î–æ–ª—è —ç–∫—Ä–∞–Ω–∞ –ø–æ–¥ –æ—Å–Ω. –≤–∏–¥–µ–æ: <span id="screen-value">50</span>%
                            </label>
                            <input type="range" class="setting-slider" id="screen-ratio" 
                                   min="0" max="100" value="50" 
                                   oninput="updateSlider('screen', this.value)">
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">
                                –ú–∞—Å—à—Ç–∞–± –ª–∏—Ü–∞: <span id="scale-value">50</span>%
                            </label>
                            <input type="range" class="setting-slider" id="face-scale" 
                                   min="0" max="100" value="50" 
                                   oninput="updateSlider('scale', this.value)">
                        </div>

                    </div>
                </div>

                <!-- –î–æ–±–∞–≤–∏—Ç—å —Å—É–±—Ç–∏—Ç—Ä—ã -->
                <div class="setting-group">
                    <div class="setting-header checkbox-header">
                        <label class="checkbox-container">
                            <input type="checkbox" id="add-subtitles" onchange="toggleSubtitles(this.checked)">
                            <span class="checkbox-label">–î–æ–±–∞–≤–∏—Ç—å —Å—É–±—Ç–∏—Ç—Ä—ã</span>
                        </label>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ -->
                <div class="setting-group hidden" id="subtitle-group">
                    <div class="setting-header" onclick="toggleGroup('subtitle-settings')">
                        <span class="toggle-icon" id="toggle-subtitle-settings">‚ñº</span>
                        <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—É–±—Ç–∏—Ç—Ä–æ–≤</span>
                    </div>
                    <div class="setting-content" id="subtitle-settings">
                        
                        <div class="setting-item">
                            <div class="radio-group">
                                <label class="radio-container">
                                    <input type="radio" name="subtitle-type" value="template" checked 
                                           onchange="updateState('subtitleType', this.value)">
                                    <span class="radio-label">–®–∞–±–ª–æ–Ω</span>
                                </label>
                                <label class="radio-container">
                                    <input type="radio" name="subtitle-type" value="manual" 
                                           onchange="updateState('subtitleType', this.value)">
                                    <span class="radio-label">–†—É—á–Ω–∞—è</span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">–®–∞–±–ª–æ–Ω:</label>
                            <select class="setting-select" id="subtitle-template" onchange="updateState('subtitleTemplate', this.value)">
                                <option value="minimal_clean">Minimal Clean</option>
                                <option value="modern_bold">Modern Bold</option>
                                <option value="elegant">Elegant</option>
                                <option value="neon">Neon</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">–ü–æ–ª–æ–∂–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤:</label>
                            <select class="setting-select" id="subtitle-position" onchange="updateState('subtitlePosition', this.value)">
                                <option value="top">–°–≤–µ—Ä—Ö—É</option>
                                <option value="center">–ü–æ —Ü–µ–Ω—Ç—Ä—É</option>
                                <option value="bottom" selected>–°–Ω–∏–∑—É</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">
                                –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞: <span id="font-value">30</span> px
                            </label>
                            <input type="range" class="setting-slider" id="font-size" 
                                   min="10" max="60" value="30" 
                                   oninput="updateSlider('font', this.value)">
                        </div>

                    </div>
                </div>

            </div>

        </div>

    </div>

    <!-- Test Panel -->
    <div class="test-panel">
        <button class="test-btn" onclick="window.backButtonCallback && window.backButtonCallback()">‚óÄ Back</button>
        <button class="test-btn" id="main-btn" style="display:none;" onclick="window.mainButtonCallback && window.mainButtonCallback()">–ó–ê–ü–£–°–¢–ò–¢–¨</button>
        <button class="test-btn" onclick="showScreen(1)">Screen 1</button>
        <button class="test-btn" onclick="showScreen(2)">Screen 2</button>
        <button class="test-btn" onclick="showScreen(3)">Screen 3</button>
    </div>

    <script src="script.js"></script>
</body>
</html>



